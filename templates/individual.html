{% extends "base.html" %}

{% block extrajs %}
<script type="text/javascript" charset="utf-8"> 
  window.onload = function () {
  piechart("piechart_party", {{ party_breakdown|safe }}, "Democrats vs. Republicans");
  barchart("recipients_barchart", {{ candidates_barchart_data|safe }}, "Top Candidates");  
  barchart("orgs_barchart", {{ orgs_barchart_data|safe }}, "Top Organizations");  
  }

</script>

{% endblock %}


{% block main %}

<h1>{{ entity_info.name }}</h1>

<div id="biographical">
  <div id="organization_picture_frame">
    <img src="/media/images/placeholder_483px.png" id="organization_logo">
  </div>
  <div id="organization_metadata">
    <h3>{{ entity_info.name }}</h3>
    <p>Description description description chicken description bbq
    description sauce description sautee description stirfry
    description vegetables description tofu description.</p>
  </div>
  <div id="cycle_filter">
    <h3>View Other Selection Cycles</h3>
    <p>Select another election cycle to change the charts below</p>
    <form action="" method="get">
      {{ cycle_form.as_p }}
      <input type="submit" value="Update Cycles" />
    </form>
  </div>
</div>

<div id="totals_section">
  <span id="amount_given">
    ${{entity_info.contribution_total_given }} Given as of 
    [[ date ]]
  </span>
  <span id="sparkline_given">
    {% if sparkline %} 
    <img src="{{ sparkline }}">
    {% else %}
    <b>Sparkline: No Data</b>
    {% endif %}
  </span>
  <a href="{{ entity_id }}/details">View Details</a>
</div>

<div id="charts">
  <div id="recipients_barchart">
      <!-- raphael chart here -->
  </div>

  <div id="orgs_barchart">
      <!-- raphael chart here -->
  </div>

  <div class="piechart">
    <div id="piechart_party">      
      <!-- raphael chart here -->
    </div>
  </div>

</div>

{% endblock %}
