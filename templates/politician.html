{% extends "base.html" %}

{% block main %}

<h1>{{ entity_info.name }}</h1>

<div id="biographical">
  <div id="politician_picture_frame">
    <img src="/media/images/Sandlin_300px_2007.jpg" id="politician_picture">
  </div>
  <div id="politician_metadata">
    <h3>{{ entity_info.name }}</h3>
    [[ Party ]] - [[ State ]]<br>
    First Elected: [[ YYYY ]] Next Election: [[ YYYY ]]<br>
  </div>
  <div id="cycle_filter">
    <h3>View Other Selection Cycles</h3>
    <p>Select another election cycle to change the charts below</p>
    <form action="" method="get">
      {{ cycle_form.as_p }}      
      
      <input type="submit" value="Update Cycles" />
    </form>
  </div>
</div>

<div id="totals_section">
  <span id="amount_received">
    ${{entity_info.contribution_total_received }} Received as of 
    [[ date ]]
  </span>
  <span id="sparkline_received">
    {% if sparkline %} 
    <img src="{{ sparkline }}">
    {% else %}
    <b>Sparkline: No Data</b>
    {% endif %}
  </span>
  <a href="{{ entity_id }}/details">View Details</a>
</div>

<div id="charts">
  <div id="industry_barchart">
    {% if contributors_barchart %} 
    <b>Industry Sectors</b>
    <img src="{{ contributors_barchart }}">
    {% else %}
    <b>Barchart: No Data</b>
    {% endif %}

  </div>

  <div class="piechart">
    <div id="piechart_instate">      
      <img src ="{{ pie_chart_instate }}">
    </div>
  </div>

  <div class="piechart">
    <div id="piechart_source">
      <img src ="{{ pie_chart_source }}">
    </div>
  </div>
</div>

<div id="top_contributors">
  <table>
    <thead>
      <th>Name</th>
      <th>Type</th>
      <th>Total Given</th>
    </thead>
    <tbody>
      {% for row in top_contributors %}
      <tr>
	{% if row.id %}
	<td><a href="/{{ row.type }}/{{ row.id }}">{{ row.name }}</a></td>
	{% else %}
	<td>{{ row.name }}</a></td>
        {% endif %} 
	<td>{{ row.type }} </td>
	<td>{{ row.amount }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
