{% extends "entity_base.html" %}
{% load humanize %}

{% block extrajs %}
<script type="text/javascript" charset="utf-8"> 
$(document).ready(function() {
  piechart("piechart_local", {{ local_breakdown|safe }});
  piechart("piechart_entity", {{ entity_breakdown|safe }});
  barchart("sectors_barchart", {{ sectors_barchart_data|safe }});
  sparkline("sparklines", {{ sparkline_data|safe }});
});
</script>

{% endblock %}

{% block contentHeader %}

{% if metadata.photo_url %}
<img alt="political photo" src="{{ metadata.photo_url }}"/>
{% endif %}

<h2>{{ entity_info.name }}</h2>
<dl>
  <dt class="noshow">Party</dt>

  {% if metadata.party == 'D' %}
  <dd>Democrat</dd>
  {% else %} 
  {% if metadata.party == 'R' %}    
  <dd>Republican</dd>
  {% else %}
  <dd>{{ metadata.party }}</dd>
  {% endif %}
  {% endif %}
    
  <dt class="noshow">State</dt>
  <dd>{{metadata.state}}</dd>
  
  {% if metadata.yrs_of_service %}
  <dt>Years of Service:</dt>
  <dd>{{metadata.yrs_of_service}}</dd>    
  {% endif %}
</dl>  
<div class="clear"></div>
{% endblock %}

{% if metadata.biography %}
{% block description %}
{{ metadata.biography }}
{% endblock %}
{% endif %}

{% block contrib_overview_amount %}
${{entity_info.totals.recipient_amount|floatformat:-1|intcomma }} Received
{% endblock %}


{% block charts %}

<div class="twoColumn chartWrapper"> 
  <div class="chart"> 
    <h4>Industry Sectors</h4>
    <div class="graph" id="sectors_barchart">
      <!-- raphael charts -->
    </div>
  </div>
</div>

<div class="clear"></div> <!-- start a new row -->

<div class="oneColumn chartWrapper">
  <div class="chart">
    <h4 class="withTip">In State vs. Out of State</h4>
    <span class="tip">in dollars</span>
    <div class="graph" id="piechart_local">
      <!-- raphael charts -->
    </div>
  </div>
</div>

<div class="oneColumn chartWrapper">
  <div class="chart">
    <h4 class="withTip">Individuals vs. PACs</h4>
    <span class="tip">in dollars</span>
    <div class="graph" id="piechart_entity">
      <!-- raphael charts -->
    </div>
  </div>
</div>

{% block contributions_tables %}
<div class="twoColumn chartWrapper">
  <h4>Top Contributors to {{ entity_info.name }}</h4>
  <table class="twoColumn">
    <thead>
      <tr id="titles">
        <th class="left">Name</th>
        <th class="center">Employee Contributions</th>
        <th class="center">PAC Contributions</th>
        <th class="right">Total</th>
      </tr>
    </thead>
    <tbody>
      {% for row in top_contributors %}
      <tr class="{% cycle 'even' 'odd' %}">
        <td>	    
	  {% if row.id %}
	  <a href="/organization/{{ row.name|slugify }}/{{ row.id }}?cycle={{cycle}}">{{ row.name }}</a>
	  {% else %}
	  {{ row.name }}
          {% endif %} 
        </td>
        <td class="center"> 
	  {% if row.employee_amount != "0" %} 
	  ${{row.employee_amount|floatformat:-1|intcomma }} 
	  {% else %}
	  --
	  {% endif %}
	</td>
        <td class="center"> 
	  {% if row.direct_amount != "0" %} 
	  ${{row.direct_amount|floatformat:-1|intcomma }}
	  {% else %} 
	  -- 
	  {% endif %}
	</td>
        <td class="right">${{ row.total_amount|floatformat:-1|intcomma }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %} <!-- end contributions_tables block -->
{% endblock %} <!-- end charts block -->

{% block lobbying %}
{% endblock %}

